---
import "../styles/global.css";

interface Props {
  title?: string;
}

const { title = "ProSite - AI Infrastructure" } = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!-- Font Awesome v7.0.1 (CSS + JS) -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Theme Script -->
    <script is:inline>
      const theme = (() => {
        if (
          typeof localStorage !== "undefined" &&
          localStorage.getItem("theme")
        ) {
          return localStorage.getItem("theme");
        }
        if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          return "dark";
        }
        return "light";
      })();

      if (theme === "dark") {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }

      window.localStorage.setItem("theme", theme);
    </script>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        overflow-x: hidden;
      }
      #app {
        display: grid;
        height: 100dvh;
        grid-template-rows: auto 1fr auto;
      }
      header {
        position: sticky;
        top: 0;
        z-index: 10;
      }
      main {
        overflow-y: auto;
        overflow-x: hidden;
        width: 100vw;
        scrollbar-gutter: stable;
      }
      footer {
        position: sticky;
        bottom: 0;
        z-index: 10;
      }
      main {
        scrollbar-width: thin;
        scrollbar-color: rgba(56, 189, 248, 0.7) rgba(255, 255, 255, 0.08);
      }
      main::-webkit-scrollbar {
        width: 10px;
      }
      main::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.06);
        border-radius: 9999px;
      }
      main::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #22d3ee, #a78bfa);
        border-radius: 9999px;
        border: 2px solid rgba(0, 0, 0, 0.6);
      }
      main::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, #06b6d4, #8b5cf6);
      }
    </style>
  </head>
  <body
    class="bg-white dark:bg-black text-zinc-900 dark:text-white antialiased transition-colors duration-300 overflow-x-hidden"
  >
    <div id="app">
      <!-- Header -->
      <header
        class="h-24 bg-white/80 dark:bg-black backdrop-blur border-b border-zinc-100 dark:border-white/10 flex items-center px-6"
      >
        <nav class="container mx-auto flex items-center justify-between">
          <!-- Logo -->
          <div class="flex items-center gap-3">
            <span class="material-icons text-cyan-400">rocket</span>
            <a
              href="/"
              class="font-semibold tracking-wide text-zinc-900 dark:text-white hover:opacity-80 transition-opacity"
            >
              ProSite
            </a>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center gap-8">
            <a
              href="/"
              class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors"
              >Inicio</a
            >
            <a
              href="/about"
              class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors"
              >Empresa</a
            >
            <a
              href="/contact"
              class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors"
              >Contacto</a
            >
          </div>

          <!-- Actions -->
          <div class="flex items-center gap-4">
            <!-- Theme Toggle -->
            <button
              id="theme-toggle"
              class="p-2 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-800"
              aria-label="Toggle theme"
            >
              <!-- Sun Icon -->
              <svg
                id="theme-toggle-light-icon"
                class="hidden w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                  fill-rule="evenodd"
                  clip-rule="evenodd"></path>
              </svg>
              <!-- Moon Icon -->
              <svg
                id="theme-toggle-dark-icon"
                class="hidden w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                ></path>
              </svg>
            </button>

            <a href="/contact" class="hidden md:btn-primary-sm">
              Empezar
            </a>
          </div>
        </nav>
      </header>

      <!-- Main Content -->
      <main class="relative">
        <slot />
      </main>

      <!-- Footer -->
      <footer
        class="h-auto bg-white/80 dark:bg-black backdrop-blur border-t border-zinc-100 dark:border-white/10 px-6 py-8"
      >
        <div
          class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-6"
        >
          <!-- Copyright -->
          <div class="flex items-center gap-2">
            <p
              class="text-sm font-semibold uppercase text-zinc-900 dark:text-white"
            >
              &copy; ProSite - <span id="date-display"></span>
            </p>
          </div>

          <!-- Social Media -->
          <div class="flex flex-col md:flex-row items-center gap-4">
            <p
              class="text-sm font-semibold uppercase text-zinc-900 dark:text-white"
            >
              Síguenos
            </p>
            <div class="flex space-x-4">
              <a
                href="https://www.facebook.com/JulioCorbaz"
                target="_blank"
                aria-label="Síguenos en Facebook"
                class="text-[#1877F2] hover:opacity-80 transition duration-300"
                ><i class="fab fa-facebook-f text-2xl"></i></a
              >
              <a
                href="https://x.com/chipy_corbaz"
                target="_blank"
                aria-label="Síguenos en X"
                class="text-zinc-900 dark:text-white hover:opacity-80 transition duration-300"
                ><i class="fab fa-x-twitter text-2xl"></i></a
              >
              <a
                href="https://www.instagram.com/juliocorbaz/"
                target="_blank"
                aria-label="Síguenos en Instagram"
                class="text-[#E4405F] hover:opacity-80 transition duration-300"
                ><i class="fab fa-instagram text-2xl"></i></a
              >
              <a
                href="https://www.youtube.com/@juliocorbaz"
                target="_blank"
                aria-label="Síguenos en Youtube"
                class="text-[#FF0000] hover:opacity-80 transition duration-300"
                ><i class="fab fa-youtube text-2xl"></i></a
              >
              <a
                href="https://www.tiktok.com/@chipy.mdp"
                target="_blank"
                aria-label="Síguenos en TikTok"
                class="text-[#EE1D52] hover:opacity-80 transition duration-300"
                ><i class="fab fa-tiktok text-2xl"></i></a
              >
              <a
                href="https://www.linkedin.com/in/julio-corbaz/"
                target="_blank"
                aria-label="Síguenos en LinkedIn"
                class="text-[#0A66C2] hover:opacity-80 transition duration-300"
                ><i class="fab fa-linkedin-in text-2xl"></i></a
              >
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script>
      // Date Display
      const dateDisplay = document.getElementById("date-display");
      const currentDate = new Date();
      const month = currentDate.getMonth() + 1;
      const year = currentDate.getFullYear();
      const hours = String(currentDate.getHours()).padStart(2, "0");
      const minutes = String(currentDate.getMinutes()).padStart(2, "0");
      const formattedDateTime = `${month}/${year} ${hours}:${minutes}`;
      if (dateDisplay) {
        dateDisplay.textContent = formattedDateTime;
      }

      // Theme Toggle
      const themeToggleBtn = document.getElementById("theme-toggle");
      const themeToggleDarkIcon = document.getElementById(
        "theme-toggle-dark-icon",
      );
      const themeToggleLightIcon = document.getElementById(
        "theme-toggle-light-icon",
      );

      if (themeToggleBtn && themeToggleDarkIcon && themeToggleLightIcon) {
        if (
          localStorage.getItem("theme") === "dark" ||
          (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          themeToggleLightIcon.classList.remove("hidden");
        } else {
          themeToggleDarkIcon.classList.remove("hidden");
        }

        themeToggleBtn.addEventListener("click", function () {
          themeToggleDarkIcon.classList.toggle("hidden");
          themeToggleLightIcon.classList.toggle("hidden");

          if (localStorage.getItem("theme")) {
            if (localStorage.getItem("theme") === "light") {
              document.documentElement.classList.add("dark");
              localStorage.setItem("theme", "dark");
            } else {
              document.documentElement.classList.remove("dark");
              localStorage.setItem("theme", "light");
            }
          } else {
            if (document.documentElement.classList.contains("dark")) {
              document.documentElement.classList.remove("dark");
              localStorage.setItem("theme", "light");
            } else {
              document.documentElement.classList.add("dark");
              localStorage.setItem("theme", "dark");
            }
          }
        });
      }
    </script>

    <!-- Font Awesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/js/all.min.js"
    ></script>
  </body>
</html>